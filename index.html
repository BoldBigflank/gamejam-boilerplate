<style>body{margin:0;text-align:center;background:#000;touch-action:none}</style><canvas id="c"></canvas><script>(()=>{const e=window,t=document,a=[38,38,40,40,37,39,37,39,66,65];let o=0;const n=0,i=1,A=2;let m,s,h,r=n;const v=c.getContext("2d"),w=320,g=240,l=c.cloneNode(),y=l.getContext("2d"),x="abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/",f=0,u=1,d=2,p={hero:{move:[{x:0,y:0,w:16,h:18},{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}],speed:100},foe:{move:[{x:0,y:0,w:16,h:18}],speed:0}},Y=8,M=.1;let X,b,k,E,F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAIAgMAAADB+w+QAAAADFBMVEUAAAARCgP///8AAADe3w1AAAAAAXRSTlMAQObYZgAAAUlJREFUKM9VUjFuwzAMpAf5BVGB+jVeuquA6CFzUYDqZzzEQ3Z5ENr+sXeiE6MiJNFH8kTSFFXNMWtSrJhz1K7oTDgkTX2rL2L0CCkgApKp9+8kWDwvEUqU0rpUv836bWUuZjbVUvum5Vj0mIhCrEJf/Zu04yryYVBMEOBE23/afrZTHpS+mcbSbEfUrduayDCPa8zvbZiHJt1l6xSbaWkvtwgS0p4Zeij3tMOjFsQsrUC/wkvb9bcYcx3XqY4Vd2UTntlaI62xJWr3BxWwtvRaPu9ThdxAt1/3xatoQ7WvghwpsJJ8FQ/0bIuXeTxk3vOdBY/sIG5qHkFZdvoB+V6AU2Iub8NaZjlcGOIB1HH6L7M0EavIgLTQzweAMnfaflg6RcRex9lEcnwOWPIBi0lxHgMmAQDHLGjodh8o2oFm4Id4E8B3CZLlD7GmBBrI7F8nAAAAAElFTkSuQmCC",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAASBAMAAAA+r0T5AAAAFVBMVEUAAAA4ODhDHFiNL3waNDzkZJohY1nptXIRAAAAAnRSTlMAwO33D4gAAAC4SURBVCjPjZDRDcMgDEQDygBhA3QJC8AC+ai6QNQNqu4/QhvOl37EauofH/hh3TH8rtuf8/HpTcdVatEciwfeBcLmEcgeuBxgzcZVF9TzWNB7eTS4CYrAzcBW4aYvEMjdc0U+0hu/dtAcRQMgEEo3vjo4CwQUhtzHqyYEZYmA6us1otITziFtAchtFKhnUF7tu/gkIrugvJbWQHlRaCAY0sSbwK4KKfWedi7twi6Go092pAiJ6mLjG9jIGdnmal9GAAAAAElFTkSuQmCC",T=!0;function D(){o=0,m=60,s=U("hero",w/2,g/2),h=[s,U("foe",100,100),U("foe",100,118),U("foe",116,118),U("foe",116,100)],r=i}function U(e,t=0,a=0){const o=p[e].move[0];return{action:"move",frame:0,frameTime:0,h:o.h,moveX:0,moveY:0,speed:p[e].speed,type:e,w:o.w,x:t,y:a}}function C(e){e.frameTime+=b,e.frameTime>M&&(e.frameTime-=M,e.frame+=1,e.frame%=p[e.type][e.action].length);const t=e.speed*b;e.x+=t*e.moveX,e.y+=t*e.moveY}function I(e){const t=p[e.type][e.action][e.frame];y.drawImage(B,t.x,t.y,t.w,t.h,Math.round(e.x),Math.round(e.y),t.w,t.h)}function Q(e,t,a,o=f,n=1){const c=n*Y,i=e.length*c,A=o===d?i:o===u?i/2:0;[...e].forEach((e,o)=>{y.drawImage(F,x.indexOf(e)*Y,0,Y,Y,t+o*c-A,a,c,c)})}function S(){T&&(E=requestAnimationFrame(S),(()=>{switch(y.fillStyle="#fff",y.fillRect(0,0,w,g),r){case n:Q("title screen",Y,Y),Q("press any key",w/2,g/2,u),o===a.length&&Q("konami mode on",w-Y,Y,d);break;case i:Q("game screen",Y,Y),(()=>{const e=Math.floor(Math.ceil(m)/60),t=Math.ceil(m)-60*e;Q(`${e}:${t>9?"":"0"}${t}`,w-Y,Y,d)})(),h.forEach(I);break;case A:Q("end screen",Y,Y)}v.drawImage(l,0,0,w,g,0,0,c.width,c.height)})(),X=Date.now(),b=(X-k)/1e3,(()=>{switch(r){case i:0>(m-=b)&&(r=A),h.forEach(C),h.slice(1).forEach(e=>{const t=((e,t)=>{const a={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return a.collide=e.x<a.entity2MaxX&&a.entity1MaxX>t.x&&e.y<a.entity2MaxY&&a.entity1MaxY>t.y,a})(s,e);t.collide&&((e,t,a)=>{const{entity1MaxX:o,entity1MaxY:n,entity2MaxX:c,entity2MaxY:i}=a,A=o-t.x,m=n-t.y,s=c-e.x,h=i-e.y;e.moveX>0&&e.moveY>0?m>A?e.x-=A:e.y-=m:e.moveX>0&&0>e.moveY?h>A?e.x-=A:e.y+=h:e.moveX>0?e.x-=A:0>e.moveX&&e.moveY>0?m>s?e.x+=s:e.y-=m:0>e.moveX&&0>e.moveY?h>s?e.x+=s:e.y+=h:0>e.moveX?e.x+=s:e.moveY>0?e.y-=m:0>e.moveY&&(e.y+=h)})(s,e,t)}),0>(e=s).x?e.x=0:e.x>w-e.w&&(e.x=w-e.w),0>e.y?e.y=0:e.y>g-e.h&&(e.y=g-e.h)}var e})(),k=X)}function V(e){(T=e)?(k=Date.now(),S()):cancelAnimationFrame(E)}function z(e){return new Promise(t=>{var a=new Image;a.onload=(()=>{t(a)}),a.src=e})}onload=(async e=>{t.title="Game Jam Boilerplate",onresize(),F=await z(F),B=await z(B),V(!0)}),onresize=e.onrotate=(()=>{l.width=w,l.height=g;const e=Math.min(innerWidth/w,innerHeight/g);c.width=w*e,c.height=g*e,[v,y].forEach(e=>{e.imageSmoothingEnabled=!1})}),t.onvisibilitychange=(e=>{V(!e.target.hidden)}),onkeydown=(e=>{if(e.preventDefault(),!e.repeat)switch(r){case i:switch(e.which){case 37:case 65:case 81:s.moveX=-1;break;case 38:case 90:case 87:s.moveY=-1;break;case 39:case 68:s.moveX=1;break;case 40:case 83:s.moveY=1;break;case 80:V(!T)}}}),onkeyup=(e=>{switch(r){case n:e.which!==a[o]||o===a.length?D():o++;break;case i:switch(e.which){case 37:case 65:case 81:s.moveX=0;break;case 38:case 90:case 87:s.moveY=0;break;case 39:case 68:s.moveX=0;break;case 40:case 83:s.moveY=0}break;case A:switch(e.which){case 84:open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:r=n}}});let j=0,H=0,R=0,Z=0;function G(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}e.ontouchstart=e.onpointerdown=(e=>{switch(e.preventDefault(),r){case i:[R,Z]=[j,H]=G(e)}}),e.ontouchmove=e.onpointermove=(e=>{switch(e.preventDefault(),r){case i:j&&H&&(([e,t])=>{e>R?(R=e)-j>30&&(s.moveX=1):j>e?R-(j=e)>30&&(s.moveX=-1):R>e&&s.moveX>0?(j=e,s.moveX=0):e>j&&0>s.moveX&&(R=e,s.moveX=0),t>Z?(Z=t)-H>30&&(s.moveY=1):H>t?Z-(H=t)>30&&(s.moveY=-1):Z>t&&s.moveY>0?(H=t,s.moveY=0):t>H&&0>s.moveY&&(Z=t,s.moveY=0)})(G(e))}}),e.ontouchend=e.onpointerup=(e=>{switch(e.preventDefault(),r){case n:D();break;case i:s.moveX=s.moveY=0,j=H=R=Z=0;break;case A:r=n}})})();</script>