<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent);function t(e,t,o){return 0>o?e:o>1?t:e*(1-o)+t*o}new(top.AudioContext||webkitAudioContext);let o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAAIAgMAAADB+w+QAAAADFBMVEUAAAARCgP///8AAADe3w1AAAAAAXRSTlMAQObYZgAAAUlJREFUKM9VUjFuwzAMpAf5BVGB+jVeuquA6CFzUYDqZzzEQ3Z5ENr+sXeiE6MiJNFH8kTSFFXNMWtSrJhz1K7oTDgkTX2rL2L0CCkgApKp9+8kWDwvEUqU0rpUv836bWUuZjbVUvum5Vj0mIhCrEJf/Zu04yryYVBMEOBE23/afrZTHpS+mcbSbEfUrduayDCPa8zvbZiHJt1l6xSbaWkvtwgS0p4Zeij3tMOjFsQsrUC/wkvb9bcYcx3XqY4Vd2UTntlaI62xJWr3BxWwtvRaPu9ThdxAt1/3xatoQ7WvghwpsJJ8FQ/0bIuXeTxk3vOdBY/sIG5qHkFZdvoB+V6AU2Iub8NaZjlcGOIB1HH6L7M0EavIgLTQzweAMnfaflg6RcRex9lEcnwOWPIBi0lxHgMmAQDHLGjodh8o2oFm4Id4E8B3CZLlD7GmBBrI7F8nAAAAAElFTkSuQmCC";function a(e,t,a,i,n=0,h=1){const m=8*h,c=e.length*(h+m),r=2===n?c:1===n?c/2:0;[...e].forEach((e,n)=>{t.drawImage(o,8*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/".indexOf(e),0,8,8,a+n*(m+1)-r,i,m,m)})}const i=[38,38,40,40,37,39,37,39,66,65];let n,h,m,r=0,A=0;const w=c.getContext("2d"),v=c.cloneNode(),s=v.getContext("2d");v.width=640,v.height=480;const g=c.cloneNode(),d=g.getContext("2d");g.width=320,g.height=240;const f=g.width-100,y=g.height-50;let l=0,x=0;const u={hero:{move:[{x:0,y:0,w:16,h:18},{x:16,y:0,w:16,h:18},{x:32,y:0,w:16,h:18},{x:48,y:0,w:16,h:18},{x:64,y:0,w:16,h:18}],speed:100},foe:{move:[{x:0,y:0,w:16,h:18}],speed:0}};let p,M,D,U,b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAASBAMAAAA+r0T5AAAAFVBMVEUAAAA4ODhDHFiNL3waNDzkZJohY1nptXIRAAAAAnRSTlMAwO33D4gAAAC4SURBVCjPjZDRDcMgDEQDygBhA3QJC8AC+ai6QNQNqu4/QhvOl37EauofH/hh3TH8rtuf8/HpTcdVatEciwfeBcLmEcgeuBxgzcZVF9TzWNB7eTS4CYrAzcBW4aYvEMjdc0U+0hu/dtAcRQMgEEo3vjo4CwQUhtzHqyYEZYmA6us1otITziFtAchtFKhnUF7tu/gkIrugvJbWQHlRaCAY0sSbwK4KKfWedi7twi6Go092pAiJ6mLjG9jIGdnmal9GAAAAAElFTkSuQmCC",k=!0;function E(){r=0,n=60,l=x=0,h=Y("hero",g.width/2,g.height/2),m=[h,Y("foe",10,10),Y("foe",614,10),Y("foe",614,452),Y("foe",300,200),Y("foe",400,300),Y("foe",500,400),Y("foe",10,452),Y("foe",100,100),Y("foe",100,118),Y("foe",116,118),Y("foe",116,100)],s.fillStyle="#fff",s.fillRect(0,0,v.width,v.height),A=1}function Y(e,t=0,o=0){const a=u[e].move[0];return{action:"move",frame:0,frameTime:0,h:a.h,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,moveX:0,moveY:0,speed:u[e].speed,type:e,w:a.w,x:t,y:o}}function R(e){e.frameTime+=M,e.frameTime>.1&&(e.frameTime-=.1,e.frame+=1,e.frame%=u[e.type][e.action].length);const t=e.speed*M*(e.moveX&&e.moveY?.7071067811865476:1);e.x+=t*e.moveX,e.y+=t*e.moveY}function X(e){const t=u[e.type][e.action][e.frame];d.drawImage(b,t.x,t.y,t.w,t.h,Math.round(e.x-l),Math.round(e.y-x),t.w,t.h)}function F(){k&&(U=requestAnimationFrame(F),(()=>{switch(d.fillStyle="#fff",d.fillRect(0,0,g.width,g.height),A){case 0:a("title screen",d,8,8),a(e?"tap to start":"press any key",d,g.width/2,g.height/2,1),10===r&&a("konami mode on",d,g.width-8,8,2);break;case 1:d.drawImage(v,l,x,g.width,g.height,0,0,g.width,g.height),a("game screen",d,8,8),(()=>{const e=Math.floor(Math.ceil(n)/60),t=Math.ceil(n)-60*e;a(`${e}:${t>9?"":"0"}${t}`,d,g.width-8,8,2)})(),m.forEach(X);break;case 2:a("end screen",d,8,8)}w.drawImage(g,0,0,g.width,g.height,0,0,c.width,c.height)})(),p=Date.now(),M=(p-D)/1e3,(()=>{switch(A){case 1:n-=M,0>n&&(A=2),I?(h.moveX=h.moveLeft+h.moveRight,h.moveY=h.moveUp+h.moveDown):(h.moveX=h.moveLeft||h.moveRight?(h.moveLeft>h.moveRight?-1:1)*t(0,1,(p-Math.max(h.moveLeft,h.moveRight))/150):0,h.moveY=h.moveDown||h.moveUp?(h.moveUp>h.moveDown?-1:1)*t(0,1,(p-Math.max(h.moveUp,h.moveDown))/150):0),m.forEach(R),m.slice(1).forEach(e=>{const t=((e,t)=>{const o={entity1MaxX:e.x+e.w,entity1MaxY:e.y+e.h,entity2MaxX:t.x+t.w,entity2MaxY:t.y+t.h};return o.collide=o.entity2MaxX>e.x&&o.entity1MaxX>t.x&&o.entity2MaxY>e.y&&o.entity1MaxY>t.y,o})(h,e);t.collide&&((e,t,o)=>{const{entity1MaxX:a,entity1MaxY:i,entity2MaxX:n,entity2MaxY:h}=o,m=a-t.x,c=i-t.y,r=n-e.x,A=h-e.y;e.moveX>0&&e.moveY>0?c>m?e.x-=m:e.y-=c:e.moveX>0&&0>e.moveY?A>m?e.x-=m:e.y+=A:e.moveX>0?e.x-=m:0>e.moveX&&e.moveY>0?c>r?e.x+=r:e.y-=c:0>e.moveX&&0>e.moveY?A>r?e.x+=r:e.y+=A:0>e.moveX?e.x+=r:e.moveY>0?e.y-=c:0>e.moveY&&(e.y+=A)})(h,e,t)}),0>(e=h).x?e.x=0:e.x>v.width-e.w&&(e.x=v.width-e.w),0>e.y?e.y=0:e.y>v.height-e.h&&(e.y=v.height-e.h),l>0&&l+100>h.x?l=Math.max(0,h.x-100):v.width-g.width>l&&h.x+h.w>l+f&&(l=Math.min(v.width-g.width,h.x+h.w-f)),x>0&&x+50>h.y?x=Math.max(0,h.y-50):v.height-g.height>x&&h.y+h.h>x+y&&(x=Math.min(v.height-g.height,h.y+h.h-y))}var e})(),D=p)}function B(e){k=e,k?(D=Date.now(),F()):cancelAnimationFrame(U)}function T(e){return new Promise(t=>{var o=new Image;o.onload=()=>{t(o)},o.src=e})}onload=async()=>{document.title="Game Jam Boilerplate",onresize(),await(async e=>{o=await e(o)})(T),b=await T(b),B(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/g.width,innerHeight/g.height);c.width=g.width*e,c.height=g.height*e,w.imageSmoothingEnabled=s.imageSmoothingEnabled=d.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{B(!e.target.hidden)},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(A){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":h.moveLeft=p;break;case"ArrowUp":case"KeyW":case"KeyZ":h.moveUp=p;break;case"ArrowRight":case"KeyD":h.moveRight=p;break;case"ArrowDown":case"KeyS":h.moveDown=p;break;case"KeyP":B(!k)}}},onkeyup=e=>{switch(A){case 0:e.which!==i[r]||10===r?E():r++;break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":h.moveRight&&(h.moveRight=p),h.moveLeft=0;break;case"ArrowRight":case"KeyD":h.moveLeft&&(h.moveLeft=p),h.moveRight=0;break;case"ArrowUp":case"KeyW":case"KeyZ":h.moveDown&&(h.moveDown=p),h.moveUp=0;break;case"ArrowDown":case"KeyS":h.moveUp&&(h.moveUp=p),h.moveDown=0}break;case 2:switch(e.code){case"KeyT":open("https://twitter.com/intent/tweet?text=viral%20marketing%20message%20https%3A%2F%2Fgoo.gl%2Fsome tiny Google url here","_blank");break;default:A=0}}};let C=0,K=0,L=0,S=0,I=!1;function Q(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),A){case 1:I=!0,[L,S]=[C,K]=Q(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),A){case 1:C&&K&&(([e,o])=>{e>L?(L=e,h.moveRight=t(0,1,(L-C)/30)):C>e?(C=e,h.moveLeft=-t(0,1,(L-C)/30)):L>e&&h.moveX>0?(C=e,h.moveRight=0):e>C&&0>h.moveX&&(L=e,h.moveLeft=0),o>S?(S=o,h.moveDown=t(0,1,(S-K)/30)):K>o?(K=o,h.moveUp=-t(0,1,(S-K)/30)):S>o&&h.moveY>0?(K=o,h.moveDown=0):o>K&&0>h.moveY&&(S=o,h.moveUp=0)})(Q(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),A){case 0:E();break;case 1:I=!1,h.moveLeft=h.moveRight=h.moveDown=h.moveUp=0,C=K=L=S=0;break;case 2:A=0}}})();</script>